<script>
const no = document.getElementById('no');
const yes = document.getElementById('yes');
const arena = document.getElementById('arena');
const celebrate = document.getElementById('celebrate');

no.onclick = startCarScene;

function startCarScene() {

  // Hide buttons
  no.style.display = "none";

  // Create car
  const car = document.createElement("img");
  car.src = "mcqueen.gif";
  car.style.position = "absolute";
  car.style.width = "120px";
  car.style.bottom = "0px";
  car.style.right = "0px";
  car.style.transition = "all 1.2s linear";
  arena.appendChild(car);

  // Create track maker
  function dropTrack(x, y) {
    const t = document.createElement("img");
    t.src = "tracks.png";
    t.style.position = "absolute";
    t.style.width = "60px";
    t.style.left = x + "px";
    t.style.top = y + "px";
    t.style.opacity = "0.8";
    arena.appendChild(t);
  }

  // PHASE 1: Speed upward
  setTimeout(() => {
    car.style.transform = "translate(-300px, -180px) rotate(-20deg)";
  }, 50);

  // Drop tracks while moving
  let trackInterval = setInterval(() => {
    const rect = car.getBoundingClientRect();
    const arenaRect = arena.getBoundingClientRect();
    dropTrack(rect.left - arenaRect.left, rect.top - arenaRect.top);
  }, 120);

  // PHASE 2: Skid & turn
  setTimeout(() => {
    car.style.transform += " rotate(180deg)";
  }, 1300);

  // PHASE 3: Drive to YES button
  setTimeout(() => {
    const yesRect = yes.getBoundingClientRect();
    const arenaRect = arena.getBoundingClientRect();
    const targetX = yesRect.left - arenaRect.left;
    const targetY = yesRect.top - arenaRect.top;
    car.style.transition = "all 1s ease-in";
    car.style.left = targetX + "px";
    car.style.top = targetY + "px";
    car.style.transform = "rotate(180deg)";
  }, 2000);

  // Stop track dropping
  setTimeout(() => {
    clearInterval(trackInterval);
  }, 2600);

  // When car "runs over" YES
  setTimeout(() => {
    yes.style.display = "none";
    showFinalScene();
  }, 3000);
}

function showFinalScene() {
  const img = document.createElement("img");
  img.src = "final.jpg";
  img.style.position = "absolute";
  img.style.left = "50%";
  img.style.top = "50%";
  img.style.transform = "translate(-50%, -50%) scale(0.5)";
  img.style.width = "200px";
  img.style.transition = "all 2s ease";
  arena.appendChild(img);

  // Zoom in
  setTimeout(() => {
    img.style.transform = "translate(-50%, -50%) scale(2)";
  }, 100);

  // Fade out
  setTimeout(() => {
    img.style.opacity = "0";
  }, 2000);
}
</script>

